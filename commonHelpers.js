import"./assets/scroll-up-9171a9e2.js";import{a as i,N as m}from"./assets/vendor-a9f52953.js";i.defaults.headers.post["Content-Type"]="application/json";i.defaults.baseURL="https://books-backend.p.goit.global/";async function g(){return(await i.get("/books/top-books")).data}async function B(t){return(await i.get(`books/category?category=${t}`)).data}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("authModal"),e=document.getElementById("sign-in-button-main"),n=document.querySelector(".auth-form-close"),s=document.getElementById("signup-link"),a=document.getElementById("signin-link"),b=document.getElementById("signup-form");document.getElementById("signin-form");const u=document.querySelector(".btn-sign-up");e.addEventListener("click",function(){h(t)}),n.addEventListener("click",function(){t.style.display="none"}),s.addEventListener("click",function(o){o.preventDefault(),d("Sign up")}),a.addEventListener("click",function(o){o.preventDefault(),d("Sign in")}),b.addEventListener("submit",function(o){o.preventDefault();const c=document.getElementById("name").value,v=document.getElementById("email").value,E=document.getElementById("password").value;L({name:c,email:v,password:E}),t.style.display="none",this.reset()});function h(o){o.style.display="block"}function L(o){const c=JSON.parse(localStorage.getItem("users"))||[];c.push(o),localStorage.setItem("users",JSON.stringify(c))}function d(o){u&&(u.textContent=o)}});const M="https://books-backend.p.goit.global/books/",S="category-list";async function w(){try{const t=await i.get(M+S);if(t.status===200){const e=t.data,n=document.querySelector(".categories-list");e.map(s=>{const a=document.createElement("li");a.textContent=s.list_name,a.classList.add("categ-item"),n.appendChild(a)})}else m.Notify.failure(`Request execution error. Status code: ${t.status}`)}catch(t){m.Notify.failure("An error occurred while sending the request."),console.error("An error occurred while sending the request:",t)}}w();const l=document.querySelector(".books"),r=document.querySelector(".categories-list"),$=document.querySelector("#books-category-name");I();async function I(){const t=await g(),e=k(t);l.insertAdjacentHTML("beforeend",e)}function k(t){return t.map(e=>f(e.list_name,e.books,!1))}function f(t,e,n){let s=n?"":`<div class = "books-list-name" >${t}</div>`;s+=`<ul class="books-container ${n?"books-container-multi":""}">
                    ${q(e)}
                </ul>`;const a=n?"":`<button class = "books-btn" type = "button" id="${t}"> SEE MORE </button>`;return s+=a,s}function q(t){return t.map(e=>`<li>
                <div data-book=${e._id} class="book-block">
                    <img src="${e.book_image}" class="book-pic" width=120 heigh=240 />
                    <p class="book-name">${e.title}</p>
                    <p class="book-author">${e.author}</p>
                </div>
         </li>`).join("")}r.addEventListener("click",async t=>{if(t.preventDefault(),t.target==r)return;const e=t.target.innerHTML;y(e)});async function y(t){for(const n of r.children)n.innerHTML!=t?n.classList.remove("is-active-item"):n.classList.add("is-active-item");let e=null;if(t=="All categories"){p("Best Sellers Books");const n=await g();e=k(n)}else{p(t);const n=await B(t);e=f(t,n,!0)}l.innerHTML=e,window.scrollTo({top:0,behavior:"smooth"})}function p(t){const e=t.split(" ");$.innerHTML=`<span class="dark-text">${e[0]}</span> ${e.slice(1).join(" ")}`}l.addEventListener("click",async t=>{if(t.target.classList.contains("books-btn")){console.log("here");const e=t.target.id;y(e)}});
//# sourceMappingURL=commonHelpers.js.map
