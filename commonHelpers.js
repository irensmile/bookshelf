import"./assets/scroll-up-2f72e7b4.js";import{a as l,N as b,l as q}from"./assets/vendor-a9f52953.js";l.defaults.headers.post["Content-Type"]="application/json";l.defaults.baseURL="https://books-backend.p.goit.global/";async function f(){return(await l.get("/books/top-books")).data}async function _(t){return(await l.get(`books/category?category=${t}`)).data}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("authModal"),e=document.getElementById("sign-in-button-main"),o=document.querySelector(".auth-form-close"),n=document.getElementById("signup-link"),i=document.getElementById("signin-link"),E=document.getElementById("signup-form");document.getElementById("signin-form");const g=document.querySelector(".btn-sign-up");e.addEventListener("click",function(){S(t)}),o.addEventListener("click",function(){t.style.display="none"}),n.addEventListener("click",function(a){a.preventDefault(),p("Sign up")}),i.addEventListener("click",function(a){a.preventDefault(),p("Sign in")}),E.addEventListener("submit",function(a){a.preventDefault();const c=document.getElementById("name").value,M=document.getElementById("email").value,w=document.getElementById("password").value;I({name:c,email:M,password:w}),t.style.display="none",this.reset()});function S(a){a.style.display="block"}function I(a){const c=JSON.parse(localStorage.getItem("users"))||[];c.push(a),localStorage.setItem("users",JSON.stringify(c))}function p(a){g&&(g.textContent=a)}});const $="https://books-backend.p.goit.global/books/",x="category-list";async function T(){try{const t=await l.get($+x);if(t.status===200){const e=t.data,o=document.querySelector(".categories-list");e.map(n=>{const i=document.createElement("li");i.textContent=n.list_name,i.classList.add("categ-item"),o.appendChild(i)})}else b.Notify.failure(`Request execution error. Status code: ${t.status}`)}catch(t){b.Notify.failure("An error occurred while sending the request."),console.error("An error occurred while sending the request:",t)}}T();const d=document.querySelector(".books"),r=document.querySelector(".categories-list"),C=document.querySelector("#books-category-name");D();async function D(){const t=await f(),e=L(t);d.insertAdjacentHTML("beforeend",e)}function L(t){return t.map(e=>v(e.list_name,e.books,!1))}function v(t,e,o){let n=o?"":`<div class = "books-list-name" >${t}</div>`;n+=`<ul class="books-container ${o?"books-container-multi":""}">
                    ${N(e)}
                </ul>`;const i=o?"":`<button class = "books-btn" type = "button" id="${t}"> SEE MORE </button>`;return n+=i,n}function N(t){return t.map(e=>`<li>
                <div data-book=${e._id} class="book-block">
                    <img src="${e.book_image}" class="book-pic" width=120 heigh=240 />
                    <p class="book-name">${e.title}</p>
                    <p class="book-author">${e.author}</p>
                </div>
         </li>`).join("")}r.addEventListener("click",async t=>{if(t.preventDefault(),t.target==r)return;const e=t.target.innerHTML;h(e)});async function h(t){for(const o of r.children)o.innerHTML!=t?o.classList.remove("is-active-item"):o.classList.add("is-active-item");let e=null;if(t=="All categories"){y("Best Sellers Books");const o=await f();e=L(o)}else{y(t);const o=await _(t);e=v(t,o,!0)}d.innerHTML=e,window.scrollTo({top:0,behavior:"smooth"})}function y(t){const e=t.split(" ");C.innerHTML=`<span class="dark-text">${e[0]}</span> ${e.slice(1).join(" ")}`}d.addEventListener("click",async t=>{if(t.target.classList.contains("books-btn")){console.log("here");const e=t.target.id;h(e)}});const s={coverModal:document.querySelector(".cover-modal"),modalCoverContant:document.querySelector(".modal-cover-contant"),closeBtn:document.querySelector(".modal-btn-close"),body:document.querySelector("body"),addBtn:document.querySelector(".add"),removeBtn:document.querySelector(".remove"),openListBtn:document.querySelector(".open-list"),modalText:document.querySelector(".modal-add-text"),booksListElement:document.querySelector(".books")};s.booksListElement.addEventListener("click",t=>{let e=null;if(t.target.classList.contains("book-block"))e=t.target.dataset.book;else if(t.target.parentNode.classList.contains("book-block"))e=t.target.parentNode.dataset.book;else return;A(e)});async function A(t){const e="https://books-backend.p.goit.global/books/";try{const n=(await l(e+t)).data;H(n),s.addBtn.addEventListener("click",()=>j(n)),O(),k(n._id),s.removeBtn.addEventListener("click",()=>R(n._id))}catch(o){console.log(o)}}function H(t){const e=`
                <img src="${t.book_image}" alt="book cover" class="modal-img">

                <div class="modal-contant-box">
                    <h2 class="modal-title">${t.title}</h2>
                    <h3 class="modal-book-author">${t.author}</h3>
                    <p class="modal-text">In a homage to Louisa May Alcott’s “Little Women,” a young man’s dark past
                        resurfaces
                        as
                        he gets to the know
                        the family
                        of his college sweetheart.</p>
                    <ul class="modal-list">
                        <li class="modal-item"><a href="${t.buy_links[0].url}" target="_blank" rel="noopener noreferrer nofollow"
                                class="modal-link">
                                <img src="../images/image1.png" alt="" class="modal-icon amazone-js">
                            </a></li>
                        <li class="modal-item"><a href="${t.buy_links[1].url}" target="_blank" rel="noopener noreferrer nofollow"
                                class="modal-link">
                                <img src="../images/image1(1).png" alt="" class="modal-icon">

                            </a></li>
                    </ul>
                </div>
    `;s.modalCoverContant.innerHTML=e}function O(){s.coverModal.classList.add("visible-element"),s.body.classList.add("no-scroll"),document.addEventListener("keydown",q.throttle(u,500))}s.coverModal.addEventListener("click",t=>{(t.target.classList.contains("cover-modal")||t.target.classList.contains("modal-btn-close"))&&(s.coverModal.classList.remove("visible-element"),s.body.classList.remove("no-scroll"),document.removeEventListener("keydown",u))});function u(t){t.key==="Escape"&&(s.coverModal.classList.remove("visible-element"),document.removeEventListener("keydown",u))}function j(t){console.log(t);const e=m(),o=e.some(n=>n._id===t._id);console.log(e),o||(e.push(t),console.log(e),B(e)),k(t._id)}function m(){return JSON.parse(localStorage.getItem("booksInList"))??[]}function B(t){localStorage.setItem("booksInList",JSON.stringify(t))}function k(t){m().some(n=>n._id===t)?(s.addBtn.style.display="none",s.removeBtn.style.display="block",s.modalText.style.display="block"):(s.addBtn.style.display="block",s.removeBtn.style.display="none",s.modalText.style.display="none")}function R(t){const o=m().filter(n=>n._id!==t);B(o),k(t)}
//# sourceMappingURL=commonHelpers.js.map
