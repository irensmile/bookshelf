{"version":3,"file":"commonHelpers.js","sources":["../src/js/category.js","../src/js/books.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'notiflix'; \n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\nconst endpointList = 'category-list';\n\nasync function fetchCategories() {\n    try {\n      const response = await axios.get(BASE_URL + endpointList);\n    \n      if (response.status === 200) {\n        console.log(response.data);\n        const categories = response.data; \n        const categoriesList = document.querySelector('.categories-list');\n\n        categories.map(category => {\n          const li = document.createElement('li');\n          li.textContent = category.list_name;\n          li.classList.add('categ-item'); \n          categoriesList.appendChild(li);\n        });\n      } else {\n        Notiflix.Notify.failure(`Request execution error. Status code: ${response.status}`);\n      }\n    } catch (error) {\n        Notiflix.Notify.failure('An error occurred while sending the request.');\n        console.error('An error occurred while sending the request:', error);\n    }\n  }\n  \n  fetchCategories();","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/';\n\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\naxios.get('/books/top-books')\n.then(res => fetchBooks(res.data));\n\n\n\nconst list = document.querySelector('.books')\n\nfunction fetchBooks(data) {\n\n    const markup = data.map((res) => {\n        return `<div class = \"books-list-name\" >${res.list_name}</div>\n                <ul class=\"books-container\">\n                    ${booksMarkup(res.books)}\n                </ul>\n                \n                <button class = \"books-btn\" type = \"button\" id = \"${res.list_name}\"> SEE MORE </button>\n                `\n      });\n      list.insertAdjacentHTML('beforeend', markup)\n      console.log(list)\n}\n\nfunction booksMarkup(books) {\n    return books.map((book) => {\n        return `<li class = \"book-block\">\n            <img src=\"${book.book_image}\" class=\"book-pic\" width=120 heigh=240 />\n            <p class=\"book-name\">${book.title}</p>\n            <p class=\"book-author\">${book.author}</p>\n        </li>`\n    }).join('');\n}\n\nconst httpRequest = new XMLHttpRequest();\n\nfunction newList() {\n    \n    \n    return `<div class = \"books-list-name\" ></div>\n    <ul class=\"books-container\">\n    </ul>`\n}\n\nhttpRequest.onreadystatechange = newList;\nhttpRequest.open(\"GET\", \"https://books-backend.p.goit.global/books/category?category=selectedCategory\", true);\nhttpRequest.setRequestHeader(\n    \"Content-Type\",\n    \"application/json\",\n  );\nhttpRequest.send();\n\nconst categoryItems = document.querySelectorAll('.categ-item');\ncategoryItems.forEach(function(category) {\n    category.addEventListener(\"click\", function() {\n        const selectedCategory = categoryItems.value;\n        const url = \"https://books-backend.p.goit.global/books/category?category=\" + selectedCategory;\n        axios.get(url)\n            .then(response => {\n                console.log(response.data);\n            })\n            .catch(error => console.error(error));\n\n    })\n})\n\n\n\n\n\nconst buttonsForCateg = document.querySelectorAll(\".books-btn\");\n\nbuttonsForCateg.forEach(function(button) {\n    button.addEventListener(\"click\", function() {\n        const showList = categoryItems.map(url)\n    list.insertAdjacentHTML(\"beforeend\", showList)\n    console.log(list)\n    });\n});\n\n// categoryItems.addEventListener(\"click\", function() { \n//     const selectedCategory = categoryItems.value;\n//     const url = \"https://books-backend.p.goit.global/books/category?category=\" + selectedCategory;\n//     axios.get(url)\n//         .then(response) })\n"],"names":["BASE_URL","endpointList","fetchCategories","response","axios","categories","categoriesList","category","li","Notiflix","error","res","fetchBooks","list","data","markup","booksMarkup","books","book","httpRequest","newList","categoryItems","url","buttonsForCateg","button","showList"],"mappings":"8FAGA,MAAMA,EAAW,6CACXC,EAAe,gBAErB,eAAeC,GAAkB,CAC7B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIJ,EAAWC,CAAY,EAExD,GAAIE,EAAS,SAAW,IAAK,CAC3B,QAAQ,IAAIA,EAAS,IAAI,EACzB,MAAME,EAAaF,EAAS,KACtBG,EAAiB,SAAS,cAAc,kBAAkB,EAEhED,EAAW,IAAIE,GAAY,CACzB,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAcD,EAAS,UAC1BC,EAAG,UAAU,IAAI,YAAY,EAC7BF,EAAe,YAAYE,CAAE,CACvC,CAAS,CACT,MACQC,EAAS,OAAO,QAAQ,yCAAyCN,EAAS,QAAQ,CAErF,OAAQO,EAAP,CACED,EAAS,OAAO,QAAQ,8CAA8C,EACtE,QAAQ,MAAM,+CAAgDC,CAAK,CACtE,CACF,CAEDR,EAAiB,EC5BnBE,EAAM,SAAS,QAAU,uCAEzBA,EAAM,SAAS,QAAQ,KAAK,gBAAkB,mBAE9CA,EAAM,IAAI,kBAAkB,EAC3B,KAAKO,GAAOC,EAAWD,EAAI,IAAI,CAAC,EAIjC,MAAME,EAAO,SAAS,cAAc,QAAQ,EAE5C,SAASD,EAAWE,EAAM,CAEtB,MAAMC,EAASD,EAAK,IAAKH,GACd,mCAAmCA,EAAI;AAAA;AAAA,sBAEhCK,EAAYL,EAAI,KAAK;AAAA;AAAA;AAAA,oEAGyBA,EAAI;AAAA,iBAEjE,EACDE,EAAK,mBAAmB,YAAaE,CAAM,EAC3C,QAAQ,IAAIF,CAAI,CACtB,CAEA,SAASG,EAAYC,EAAO,CACxB,OAAOA,EAAM,IAAKC,GACP;AAAA,wBACSA,EAAK;AAAA,mCACMA,EAAK;AAAA,qCACHA,EAAK;AAAA,cAErC,EAAE,KAAK,EAAE,CACd,CAEA,MAAMC,EAAc,IAAI,eAExB,SAASC,GAAU,CAGf,MAAO;AAAA;AAAA,UAGX,CAEAD,EAAY,mBAAqBC,EACjCD,EAAY,KAAK,MAAO,+EAAgF,EAAI,EAC5GA,EAAY,iBACR,eACA,kBACJ,EACAA,EAAY,KAAI,EAEhB,MAAME,EAAgB,SAAS,iBAAiB,aAAa,EAC7DA,EAAc,QAAQ,SAASd,EAAU,CACrCA,EAAS,iBAAiB,QAAS,UAAW,CAE1C,MAAMe,EAAM,+DADaD,EAAc,MAEvCjB,EAAM,IAAIkB,CAAG,EACR,KAAKnB,GAAY,CACd,QAAQ,IAAIA,EAAS,IAAI,CACzC,CAAa,EACA,MAAMO,GAAS,QAAQ,MAAMA,CAAK,CAAC,CAEhD,CAAK,CACL,CAAC,EAMD,MAAMa,EAAkB,SAAS,iBAAiB,YAAY,EAE9DA,EAAgB,QAAQ,SAASC,EAAQ,CACrCA,EAAO,iBAAiB,QAAS,UAAW,CACxC,MAAMC,EAAWJ,EAAc,IAAI,GAAG,EAC1CR,EAAK,mBAAmB,YAAaY,CAAQ,EAC7C,QAAQ,IAAIZ,CAAI,CACpB,CAAK,CACL,CAAC"}