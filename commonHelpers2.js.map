{"version":3,"file":"commonHelpers2.js","sources":["../src/images/icons.svg","../src/images/books.jpg","../src/js/shoppinglist.js"],"sourcesContent":["export default \"__VITE_ASSET__46c74f80__\"","export default \"__VITE_ASSET__8dbc6c18__\"","import sprite from '../images/icons.svg';\nimport amazonLogo from '../images/amazon_logo.svg';\nimport appleBooksLogo from '../images/apple_books.svg';\nimport booksPic from '../images/books.jpg';\n\nconst elements = {\ncontainer: document.querySelector('.js-list'),\ntotalQuantity: document.querySelector('.js-quantity'),\nclearBtn: document.querySelector('.js-clear'),\npageName: document.querySelector('.js-title'),\nmessage: document.querySelector('.js-message'),\nbooksImg: document.querySelector('.js-books'),\n}\n\n\nconst BOOKS_KEY = 'booksInList'\n\nvar books = null;\n\nupdateShoppingCart();\n\nelements.container.addEventListener('click', (event) => {\n\n  var btn = null\n  if (event.target.classList.contains('icon-delete')) {\n    btn = event.target.parentNode;\n  }\n  else if (event.target.parentNode.classList.contains('icon-delete')) {\n    btn = event.target.parentNode.parentNode;\n  }\n  else if (event.target.classList.contains('btn-delete')) {\n    btn = event.target;\n  }\n  if (btn)\n    handlerRemoveSingleBook(btn.dataset.id)\n})\n\nfunction createMarkup(arr) {\n  return arr.map(({_id, book_image, title, list_name, description, author, buy_links})=> `\n<li data-id='${_id}' class='shopping-card-item'>\n    <img src='${book_image}' alt ='${title}' class='shopping-img'>\n    <div class=\"shopping-info\">\n      <h2 class='shopping_title description-title'>${title}</h2>\n      <p class='shopping-list_name'>${list_name}</p>\n      <h3 class='shopping-text description'>${description}</h3>\n      <div class='shopping-socials'>\n        <p class= 'shopping_author'>${author}</p>\n        <ul class=\"socials_list\">\n          ${createBuyLinksMarkup(buy_links)}\n        </ul>\n      </div>\n    </div>\n\n  <button type=\"button\" class=\"js-clear btn-delete\", data-id=${_id}>\n    <svg class=\"icon-delete\" width=\"28\" height=\"28\">\n      <use href=\"${sprite}#icon-trash\"></use>\n    </svg>\n  </button>\n\n</li>`).join('');\n}\n\nfunction createBuyLinksMarkup(buyLinks) {\n    return buyLinks.slice(0, 2).map((buyLink) => {\n      let sellerLogo = null;\n      let cssClass = null;\n      switch (buyLink.name) {\n        case 'Amazon': {\n          cssClass = \"social-icon-amazon\"\n          sellerLogo = `${amazonLogo}`;\n          break;\n        }\n        case 'Apple Books': {\n          sellerLogo = `${appleBooksLogo}`;\n          cssClass = \"social-icon-book\";\n          break;\n        }\n        default: {\n          sellerLogo = `${booksPic}`;\n          cssClass = \"social-icon-book\";\n        }\n      }\n      return `<li class = \"book-icon\">\n      <a\n        class=${cssClass}\n        href=${buyLink.url}\n        target=\"_blank\"\n      rel=\"nofollow noopener noreferree\"\n        aria-label=\"Book icon\"\n      >\n      <img src=${sellerLogo} alt=\"${buyLink.name}\" width ='32px' height='32px'/>\n      </a>\n  </li>`}\n  ).join('');\n}\n\nfunction updateShoppingCart() {\n  books = JSON.parse(localStorage.getItem(BOOKS_KEY)) ?? [];\n  if (books.length) {\n    elements.booksImg.style.display = 'none';\n    elements.message.style.display = 'none';\n    elements.container.innerHTML = createMarkup(books);\n\n  } else {\n    elements.container.innerHTML = \"\";\n    elements.booksImg.style.display = \"block\";\n    elements.message.style.display = 'block';\n    elements.booksImg.style.visibility = 'visible';\n    elements.message.style.visibility = 'visible';\n  }\n}\n\nfunction handlerRemoveSingleBook(idToDelete) {\n  const updatedBooksList = books.filter(book => book._id !== idToDelete);\n  if (updatedBooksList.length == 0)\n    localStorage.removeItem(BOOKS_KEY);\n  else\n    localStorage.setItem(BOOKS_KEY, JSON.stringify(updatedBooksList));\n  //window.location.href = \"./index.html\";\n  updateShoppingCart();\n\n}\n\nfunction handlerClearBasket(evt) {\n  localStorage.removeItem(BOOKS_KEY);\n  window.location.href = \"./index.html\";\n}\n\n\n"],"names":["sprite","booksPic","elements","BOOKS_KEY","books","updateShoppingCart","event","btn","handlerRemoveSingleBook","createMarkup","arr","_id","book_image","title","list_name","description","author","buy_links","createBuyLinksMarkup","buyLinks","buyLink","sellerLogo","cssClass","amazonLogo","appleBooksLogo","idToDelete","updatedBooksList","book"],"mappings":"0DAAA,MAAeA,EAAA,qDCAAC,EAAA,4DCKTC,EAAW,CACjB,UAAW,SAAS,cAAc,UAAU,EAC5C,cAAe,SAAS,cAAc,cAAc,EACpD,SAAU,SAAS,cAAc,WAAW,EAC5C,SAAU,SAAS,cAAc,WAAW,EAC5C,QAAS,SAAS,cAAc,aAAa,EAC7C,SAAU,SAAS,cAAc,WAAW,CAC5C,EAGMC,EAAY,cAElB,IAAIC,EAAQ,KAEZC,IAEAH,EAAS,UAAU,iBAAiB,QAAUI,GAAU,CAEtD,IAAIC,EAAM,KACND,EAAM,OAAO,UAAU,SAAS,aAAa,EAC/CC,EAAMD,EAAM,OAAO,WAEZA,EAAM,OAAO,WAAW,UAAU,SAAS,aAAa,EAC/DC,EAAMD,EAAM,OAAO,WAAW,WAEvBA,EAAM,OAAO,UAAU,SAAS,YAAY,IACnDC,EAAMD,EAAM,QAEVC,GACFC,EAAwBD,EAAI,QAAQ,EAAE,CAC1C,CAAC,EAED,SAASE,EAAaC,EAAK,CACzB,OAAOA,EAAI,IAAI,CAAC,CAAC,IAAAC,EAAK,WAAAC,EAAY,MAAAC,EAAO,UAAAC,EAAW,YAAAC,EAAa,OAAAC,EAAQ,UAAAC,CAAS,IAAK;AAAA,eAC1EN;AAAA,gBACCC,YAAqBC;AAAA;AAAA,qDAEgBA;AAAA,sCACfC;AAAA,8CACQC;AAAA;AAAA,sCAERC;AAAA;AAAA,YAE1BE,EAAqBD,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,+DAKqBN;AAAA;AAAA,mBAE5CX;AAAA;AAAA;AAAA;AAAA,MAIb,EAAE,KAAK,EAAE,CACf,CAEA,SAASkB,EAAqBC,EAAU,CACpC,OAAOA,EAAS,MAAM,EAAG,CAAC,EAAE,IAAKC,GAAY,CAC3C,IAAIC,EAAa,KACbC,EAAW,KACf,OAAQF,EAAQ,KAAI,CAClB,IAAK,SAAU,CACbE,EAAW,qBACXD,EAAa,GAAGE,IAChB,KACD,CACD,IAAK,cAAe,CAClBF,EAAa,GAAGG,IAChBF,EAAW,mBACX,KACD,CACD,QACED,EAAa,GAAGpB,IAChBqB,EAAW,kBAEd,CACD,MAAO;AAAA;AAAA,gBAEGA;AAAA,eACDF,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKNC,UAAmBD,EAAQ;AAAA;AAAA,QAEpC,CACR,EAAI,KAAK,EAAE,CACX,CAEA,SAASf,GAAqB,CAC5BD,EAAQ,KAAK,MAAM,aAAa,QAAQD,CAAS,CAAC,GAAK,GACnDC,EAAM,QACRF,EAAS,SAAS,MAAM,QAAU,OAClCA,EAAS,QAAQ,MAAM,QAAU,OACjCA,EAAS,UAAU,UAAYO,EAAaL,CAAK,IAGjDF,EAAS,UAAU,UAAY,GAC/BA,EAAS,SAAS,MAAM,QAAU,QAClCA,EAAS,QAAQ,MAAM,QAAU,QACjCA,EAAS,SAAS,MAAM,WAAa,UACrCA,EAAS,QAAQ,MAAM,WAAa,UAExC,CAEA,SAASM,EAAwBiB,EAAY,CAC3C,MAAMC,EAAmBtB,EAAM,OAAOuB,GAAQA,EAAK,MAAQF,CAAU,EACjEC,EAAiB,QAAU,EAC7B,aAAa,WAAWvB,CAAS,EAEjC,aAAa,QAAQA,EAAW,KAAK,UAAUuB,CAAgB,CAAC,EAElErB,GAEF"}