{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shoppinglist.js"],"sourcesContent":["\nconst elements = {\ncontainer: document.querySelector('.js-list'),\ntotalQuantity: document.querySelector('.js-quantity'),\nclearBtn: document.querySelector('.js-clear'),\npageName: document.querySelector('.js-title'),\nmessage: document.querySelector('.js-message'),\nbooksImg: document.querySelector('.js-books'),\n}\n\nconst BOOKS_KEY = 'booksInList'\nvar books = null;\n\nupdateShoppingCart();\n\nelements.container.addEventListener('click', (event) => {\n  if (event.target.classList.contains('icon-delete'))\n    handlerRemoveSingleBook(event.target.parentNode.dataset.id);\n})\n\nfunction createMarkup(arr) {\n  return arr.map(({_id, book_image, title, list_name, description, author, buy_links})=> `\n<li data-id='${_id}' class='shopping-card-item'>\n    <img src='${book_image}' alt ='${title}' class='shopping-img'>\n    <div class=\"shopping-info\">\n      <h2 class='shopping_title description-title'>${title}</h2>\n      <p class='shopping-list_name'>${list_name}</p>\n      <h3 class='shopping-text description'>${description}</h3>\n      <div class='shopping-socials'>\n        <p class= 'shopping_author'>${author}</p>\n        <ul class=\"socials_list\">\n          ${createBuyLinksMarkup(buy_links)}\n        </ul>\n      </div>\n    </div>\n\n  <button type=\"button\" class=\"js-clear btn-delete\", data-id=${_id}>\n    <svg class=\"icon-delete\" width=\"28\" height=\"28\">\n      <use href=\"./images/icons.svg#icon-trash\"></use>\n    </svg>\n  </button>\n\n</li>`).join('');\n}\n\nfunction createBuyLinksMarkup(buyLinks) {\n    return buyLinks.slice(0, 2).map((buyLink) => {\n      let sellerLogo = null;\n      let cssClass = null;\n      switch (buyLink.name) {\n        case 'Amazon': {\n          cssClass = \"social-icon-amazon\"\n          sellerLogo = '../images/amazon_logo.svg';\n          break;\n        }\n        case 'Apple Books': {\n          sellerLogo = '../images/apple_books.svg';\n          cssClass = \"social-icon-book\";\n          break;\n        }\n        // case 'Barnes and Nobel': {\n        //   sellerLogo = '';\n        //   break;\n        // }\n        // case 'Books-A-Million': {\n        //   sellerLogo = '';\n        //   break;\n        // }\n        // case 'BookShop': {\n        //   sellerLogo = '';\n        //   break;\n        // }\n        // case 'Indie Bound': {\n        //   sellerLogo = '';\n        //   break;\n        // }\n        default: {\n          sellerLogo = '../images/book.jpg';\n          cssClass = \"social-icon-book\";\n        }\n      }\n      return `<li class = \"book-icon\">\n      <a\n        class=${cssClass}\n        href=${buyLink.url}\n        target=\"_blank\"\n      rel=\"nofollow noopener noreferree\"\n        aria-label=\"Book icon\"\n      >\n      <img src=${sellerLogo} alt=\"${buyLink.name}\" width ='32px' height='32px'/>\n      </a>\n  </li>`}\n  ).join('');\n}\n\nfunction updateShoppingCart() {\n  books = JSON.parse(localStorage.getItem(BOOKS_KEY)) ?? [];\n  if (books.length) {\n    elements.booksImg.style.display = 'none';\n    elements.message.style.display = 'none';\n    elements.container.innerHTML = createMarkup(books);\n\n  } else {\n    elements.container.innerHTML = \"\";\n    elements.booksImg.style.display = \"block\";\n    elements.message.style.display = 'block';\n    elements.booksImg.style.visibility = 'visible';\n    elements.message.style.visibility = 'visible';\n  }\n}\n\nfunction handlerRemoveSingleBook(idToDelete) {\n  const updatedBooksList = books.filter(book => book._id !== idToDelete);\n  if (updatedBooksList.length == 0)\n    localStorage.removeItem(BOOKS_KEY);\n  else\n    localStorage.setItem(BOOKS_KEY, JSON.stringify(updatedBooksList));\n  //window.location.href = \"./index.html\";\n  updateShoppingCart();\n\n}\n\nfunction handlerClearBasket(evt) {\n  localStorage.removeItem(BOOKS_KEY);\n  window.location.href = \"./index.html\";\n}\n\n\n"],"names":["elements","BOOKS_KEY","books","updateShoppingCart","event","handlerRemoveSingleBook","createMarkup","arr","_id","book_image","title","list_name","description","author","buy_links","createBuyLinksMarkup","buyLinks","buyLink","sellerLogo","cssClass","idToDelete","updatedBooksList","book"],"mappings":"uCACA,MAAMA,EAAW,CACjB,UAAW,SAAS,cAAc,UAAU,EAC5C,cAAe,SAAS,cAAc,cAAc,EACpD,SAAU,SAAS,cAAc,WAAW,EAC5C,SAAU,SAAS,cAAc,WAAW,EAC5C,QAAS,SAAS,cAAc,aAAa,EAC7C,SAAU,SAAS,cAAc,WAAW,CAC5C,EAEMC,EAAY,cAClB,IAAIC,EAAQ,KAEZC,IAEAH,EAAS,UAAU,iBAAiB,QAAUI,GAAU,CAClDA,EAAM,OAAO,UAAU,SAAS,aAAa,GAC/CC,EAAwBD,EAAM,OAAO,WAAW,QAAQ,EAAE,CAC9D,CAAC,EAED,SAASE,EAAaC,EAAK,CACzB,OAAOA,EAAI,IAAI,CAAC,CAAC,IAAAC,EAAK,WAAAC,EAAY,MAAAC,EAAO,UAAAC,EAAW,YAAAC,EAAa,OAAAC,EAAQ,UAAAC,CAAS,IAAK;AAAA,eAC1EN;AAAA,gBACCC,YAAqBC;AAAA;AAAA,qDAEgBA;AAAA,sCACfC;AAAA,8CACQC;AAAA;AAAA,sCAERC;AAAA;AAAA,YAE1BE,EAAqBD,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,+DAKqBN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMzD,EAAE,KAAK,EAAE,CACf,CAEA,SAASO,EAAqBC,EAAU,CACpC,OAAOA,EAAS,MAAM,EAAG,CAAC,EAAE,IAAKC,GAAY,CAC3C,IAAIC,EAAa,KACbC,EAAW,KACf,OAAQF,EAAQ,KAAI,CAClB,IAAK,SAAU,CACbE,EAAW,qBACXD,EAAa,4BACb,KACD,CACD,IAAK,cAAe,CAClBA,EAAa,4BACbC,EAAW,mBACX,KACD,CAiBD,QACED,EAAa,qBACbC,EAAW,kBAEd,CACD,MAAO;AAAA;AAAA,gBAEGA;AAAA,eACDF,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKNC,UAAmBD,EAAQ;AAAA;AAAA,QAEpC,CACR,EAAI,KAAK,EAAE,CACX,CAEA,SAASd,GAAqB,CAC5BD,EAAQ,KAAK,MAAM,aAAa,QAAQD,CAAS,CAAC,GAAK,GACnDC,EAAM,QACRF,EAAS,SAAS,MAAM,QAAU,OAClCA,EAAS,QAAQ,MAAM,QAAU,OACjCA,EAAS,UAAU,UAAYM,EAAaJ,CAAK,IAGjDF,EAAS,UAAU,UAAY,GAC/BA,EAAS,SAAS,MAAM,QAAU,QAClCA,EAAS,QAAQ,MAAM,QAAU,QACjCA,EAAS,SAAS,MAAM,WAAa,UACrCA,EAAS,QAAQ,MAAM,WAAa,UAExC,CAEA,SAASK,EAAwBe,EAAY,CAC3C,MAAMC,EAAmBnB,EAAM,OAAOoB,GAAQA,EAAK,MAAQF,CAAU,EACjEC,EAAiB,QAAU,EAC7B,aAAa,WAAWpB,CAAS,EAEjC,aAAa,QAAQA,EAAW,KAAK,UAAUoB,CAAgB,CAAC,EAElElB,GAEF"}